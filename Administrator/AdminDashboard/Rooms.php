



<?php
require_once("../include/Header.php");
require_once("../include/Navigation.php");
?>
<?php

if(isset($_GET['Deleted']))
{
  ?>
  <div class="alert alert-danger" role="alert">
  Room Deleted!!!
</div>



<?php
}
else{

}



?>

<br>
<br>

<div class="container" style="min-height:70vh">

<div class="row">
    <div class="col-4">
        <h3>Add Rooms</h3>
        <form  method="POST" action="">
                   <div class="form-group">
                
                <input type="text" name="roomname" placeholder="RoomName" class="form-control" required/>
                
            </div><br>

            <div>
            <input type="text" name="category" placeholder="Category" class="form-control" required/>
                
            </div><br>
            
            

            <div>
                <button type="submit" class="btn btn-success" name="save_btn">Save</button> 
                <button type="submit" class="btn btn-secondary" name="cancel_btn">Cancel</button>
            </div>
            
        </form>
    </div>
    <div class="col-8">
        


        <div class="d-flex justify-content-between align-items-center">
        <h3> Rooms </h3>
        <form action="">
            
            <input type="text" name="search" value="" placeholder="search"> 
        </form>
        </div>

    <table class="table">
  <thead>
    <tr>
     
      <th scope="col">RoomName</th>
      <th scope="col">Catagory</th>
      <th scope="col">Status</th>
      <th scope="col">Action</th>

    </tr>
    
  </thead>
  <tbody>



    <?php
    require_once("../../connect.php");
    $searchQuery = $_GET['search'] ?? "";
    $query= "SELECT *FROM rooms";
    if($searchQuery!=0)
    {
      $query="select *From rooms where RoomName like '$searchQuery%' or RoomType like '$searchQuery%'";
    }
    $FetchData=mysqli_Query($connection,$query) or die(mysqli_error($connection));
    $IsAnyRoomAdded = mysqli_num_rows($FetchData);
    if($IsAnyRoomAdded>0)
    {
        // $sno = 1;
        while($row = mysqli_fetch_assoc($FetchData))
        {
        ?>
        <tr>
       
        
        <td><?php echo $row['RoomName']; ?></td>
        <td><?php echo $row['RoomType']; ?></td>
        <!-- ........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................... -->
        <td><?php echo $row['Status']; ?></td>
        <td><a href="/Administrator/AdminDashboard/RoomsEdit.php?id=<?= $row['RoomId'] ?>" class="btn btn-success"  >Edit</a>
        <a href="RoomDelete.php?id=<?=$row['RoomId']?>" class="btn btn-danger">Delete</a></td>
        
        <!-- <td>
       <a href="#" class="btn btn-sm btn-warning"> Edit </a>
        <a href="#" class="btn btn-sm btn-danger"> Delete </a> 
       </td> -->
       </tr>
        <?php
         }
    }
        else{
        ?>
        <tr>
        <td colspan="7"> No any rooms is added yet. </td>
        </tr>
        <?php
        }
         ?>
           
  </tbody>
</table>
</div>
</div>
</div>


<?php
 require_once("../../connect.php");

if(isset($_POST['save_btn']))
{

   $RoomName=$_POST['roomname'];
  $Category=$_POST['category'];
   $Status="Available";

    $sql="Select *From `rooms` where RoomName='$RoomName'";
    $result=mysqli_query($connection,$sql) or die(mysqli_error($connection));
  
    if(mysqli_num_rows($result)>0)
  {
   
    ?>
    
    <div class="alert alert-danger" role="alert">
    The room name is already selected!!!
    </div>
   <?php   
  }
  else
  {
   mysqli_query($connection, "INSERT INTO `rooms`(RoomName,RoomType,Status) VALUES ('".$RoomName."','".$Category."','".$Status."')" ) 
   or die(mysqli_error($connection));


   ?>
   <div class="alert alert-success" role="alert">
  Successfully added!!!
  </div>
   <?php   
  }
}
?>





<?php
require_once("../include/Footer.php");
?>